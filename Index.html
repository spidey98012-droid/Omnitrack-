<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OmniTrack - Personal Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* ALL PREVIOUS STYLES EXACTLY THE SAME */
        :root {
            --primary-color: #4a90e2;
            --secondary-color: #f8f9fa;
            --text-color: #333;
            --glass-bg: rgba(255, 255, 255, 0.25);
            --glass-border: rgba(255, 255, 255, 0.18);
            --shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
            --blur: blur(10px);
        }

        .theme-sky-blue {
            --primary-color: #4a90e2;
            --secondary-color: #f8f9fa;
            --text-color: #333;
            --glass-bg: rgba(255, 255, 255, 0.25);
            --glass-border: rgba(255, 255, 255, 0.18);
            --bg-gradient: linear-gradient(135deg, #a1c4fd 0%, #c2e9fb 100%);
        }

        .theme-pink {
            --primary-color: #e91e63;
            --secondary-color: #fce4ec;
            --text-color: #333;
            --glass-bg: rgba(255, 255, 255, 0.25);
            --glass-border: rgba(255, 255, 255, 0.18);
            --bg-gradient: linear-gradient(135deg, #fccb90 0%, #d57eeb 100%);
        }

        .theme-white {
            --primary-color: #333;
            --secondary-color: #fff;
            --text-color: #333;
            --glass-bg: rgba(255, 255, 255, 0.8);
            --glass-border: rgba(255, 255, 255, 0.5);
            --bg-gradient: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        }

        .theme-black {
            --primary-color: #ff4081;
            --secondary-color: #121212;
            --text-color: #fff;
            --glass-bg: rgba(0, 0, 0, 0.25);
            --glass-border: rgba(255, 255, 255, 0.1);
            --bg-gradient: linear-gradient(135deg, #434343 0%, #000000 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        body {
            background: var(--bg-gradient);
            color: var(--text-color);
            min-height: 100vh;
            overflow-x: hidden;
            transition: all 0.3s ease;
        }

        .petal {
            position: fixed;
            top: -10px;
            width: 15px;
            height: 15px;
            background: #ffb6c1;
            border-radius: 50% 0 50% 50%;
            opacity: 0.7;
            z-index: -1;
            animation: fall linear forwards;
        }

        @keyframes fall {
            to {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .name {
            font-size: 2.5rem;
            font-weight: 700;
            text-align: center;
            margin: 20px 0;
            color: var(--text-color);
        }

        .settings-btn {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            backdrop-filter: var(--blur);
            -webkit-backdrop-filter: var(--blur);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: var(--shadow);
            color: var(--text-color);
            font-size: 1.2rem;
        }

        .widgets-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .widget {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            backdrop-filter: var(--blur);
            -webkit-backdrop-filter: var(--blur);
            border-radius: 16px;
            padding: 20px;
            box-shadow: var(--shadow);
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            min-height: 150px;
        }

        .widget:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px 0 rgba(31, 38, 135, 0.5);
        }

        .widget-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .widget-title {
            font-size: 1.2rem;
            font-weight: 600;
        }

        .page {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .welcome-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 80vh;
            text-align: center;
        }

        .welcome-title {
            font-size: 3.5rem;
            font-weight: 700;
            margin-bottom: 10px;
            background: linear-gradient(45deg, var(--primary-color), #ff6b6b);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .welcome-subtitle {
            font-size: 1.5rem;
            margin-bottom: 30px;
            opacity: 0.8;
        }

        .welcome-name {
            font-size: 2.5rem;
            font-weight: 600;
            margin-bottom: 20px;
            color: var(--text-color);
        }

        .welcome-line {
            font-size: 1.2rem;
            max-width: 600px;
            margin: 0 auto 40px;
            line-height: 1.6;
        }

        .start-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .start-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }

        .back-btn {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            backdrop-filter: var(--blur);
            -webkit-backdrop-filter: var(--blur);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: var(--shadow);
            color: var(--text-color);
            font-size: 1.2rem;
            margin-bottom: 20px;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            overflow-y: auto;
        }

        .modal-content {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            backdrop-filter: var(--blur);
            -webkit-backdrop-filter: var(--blur);
            margin: 2% auto;
            border-radius: 16px;
            width: 90%;
            max-width: 800px;
            box-shadow: var(--shadow);
            padding: 20px;
            position: relative;
            color: var(--text-color);
        }

        .close-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-color);
        }

        .modal-header {
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--glass-border);
        }

        .modal-title {
            font-size: 1.8rem;
            font-weight: 600;
        }

        .theme-selector {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .theme-option {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            border: 3px solid transparent;
            transition: transform 0.3s ease;
        }

        .theme-option:hover {
            transform: scale(1.1);
        }

        .theme-option.active {
            border-color: var(--text-color);
        }

        .theme-sky-blue-btn {
            background: linear-gradient(135deg, #a1c4fd 0%, #c2e9fb 100%);
        }

        .theme-pink-btn {
            background: linear-gradient(135deg, #fccb90 0%, #d57eeb 100%);
        }

        .theme-white-btn {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        }

        .theme-black-btn {
            background: linear-gradient(135deg, #434343 0%, #000000 100%);
        }

        .data-management {
            margin-top: 30px;
        }

        .btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: transparent;
            border: 1px solid var(--primary-color);
            color: var(--primary-color);
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }

        input, select, textarea {
            width: 100%;
            padding: 10px;
            border-radius: 8px;
            border: 1px solid var(--glass-border);
            background: var(--glass-bg);
            color: var(--text-color);
            backdrop-filter: var(--blur);
            -webkit-backdrop-filter: var(--blur);
        }

        textarea {
            min-height: 100px;
            resize: vertical;
        }

        .items-list {
            margin-top: 20px;
            max-height: 300px;
            overflow-y: auto;
        }

        .item {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .item-info {
            flex: 1;
        }

        .item-actions {
            display: flex;
            gap: 10px;
        }

        .action-btn {
            background: transparent;
            border: none;
            cursor: pointer;
            font-size: 1.2rem;
            color: var(--text-color);
        }

        .delete-btn {
            color: #e74c3c;
        }

        .strength-categories {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .strength-category {
            flex: 1;
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 8px;
            padding: 15px;
            min-height: 200px;
        }

        .category-title {
            font-weight: 600;
            margin-bottom: 10px;
            text-align: center;
            padding-bottom: 5px;
            border-bottom: 1px solid var(--glass-border);
        }

        .chapter-item {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 6px;
            padding: 10px;
            margin-bottom: 8px;
            cursor: move;
        }

        .chapter-title {
            font-weight: 500;
            margin-bottom: 5px;
        }

        .progress-checklist {
            display: flex;
            gap: 5px;
            flex-wrap: wrap;
            margin-top: 5px;
        }

        .progress-item {
            font-size: 0.8rem;
            padding: 2px 5px;
            border-radius: 4px;
            background: var(--glass-bg);
            cursor: pointer;
        }

        .progress-item.completed {
            background: var(--primary-color);
            color: white;
        }

        .countdown-display {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin: 20px 0;
        }

        .countdown-unit {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            min-width: 80px;
        }

        .countdown-value {
            font-size: 1.8rem;
            font-weight: 700;
        }

        .countdown-label {
            font-size: 0.8rem;
            margin-top: 5px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .stat-card {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: 700;
            margin: 10px 0;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .module-content {
            padding: 20px;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
            margin-bottom: 20px;
        }

        .calendar-day {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 8px;
            padding: 10px;
            text-align: center;
            min-height: 60px;
            cursor: pointer;
        }

        .calendar-day:hover {
            background: var(--primary-color);
            color: white;
        }

        .calendar-day.empty {
            background: transparent;
            border: none;
            cursor: default;
        }

        .calendar-day.today {
            background: var(--primary-color);
            color: white;
            font-weight: bold;
        }

        .calendar-header {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
            margin-bottom: 10px;
        }

        .calendar-header-day {
            text-align: center;
            font-weight: bold;
            padding: 10px;
        }

        .todo-category {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            margin-right: 5px;
        }

        .todo-priority {
            display: inline-block;
            margin-right: 5px;
        }

        /* Projects Tab Styles */
        .projects-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .projects-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .project-card {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            backdrop-filter: var(--blur);
            -webkit-backdrop-filter: var(--blur);
            border-radius: 16px;
            padding: 20px;
            box-shadow: var(--shadow);
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .project-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px 0 rgba(31, 38, 135, 0.5);
        }

        .project-name {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .project-languages {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-bottom: 10px;
        }

        .language-tag {
            background: var(--primary-color);
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
        }

        .project-description {
            margin-bottom: 15px;
            line-height: 1.5;
        }

        .progress-bar-container {
            background: var(--glass-bg);
            border-radius: 10px;
            height: 10px;
            margin-bottom: 15px;
            overflow: hidden;
        }

        .progress-bar {
            background: var(--primary-color);
            height: 100%;
            border-radius: 10px;
            transition: width 0.3s ease;
        }

        .project-images {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 15px;
        }

        .project-image {
            width: 100%;
            height: 80px;
            object-fit: cover;
            border-radius: 8px;
            cursor: pointer;
        }

        .upgrades-list {
            margin-top: 15px;
        }

        .upgrade-item {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 8px;
            padding: 10px;
            margin-bottom: 8px;
        }

        .upgrade-priority {
            display: inline-block;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.7rem;
            margin-right: 5px;
        }

        .priority-high {
            background: #e74c3c;
            color: white;
        }

        .priority-medium {
            background: #f39c12;
            color: white;
        }

        .priority-low {
            background: #27ae60;
            color: white;
        }

        .edit-btn {
            background: transparent;
            border: 1px solid var(--primary-color);
            color: var(--primary-color);
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8rem;
        }

        .image-upload-container {
            border: 2px dashed var(--glass-border);
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            margin-bottom: 15px;
            cursor: pointer;
        }

        .image-upload-container:hover {
            border-color: var(--primary-color);
        }

        /* NEW EDUCATION STYLES */
        .education-subjects {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            justify-content: center;
        }

        .subject-tab {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 8px;
            padding: 15px 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            font-size: 1.1rem;
        }

        .subject-tab.active {
            background: var(--primary-color);
            color: white;
        }

        .chapters-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 30px;
            background: var(--glass-bg);
            border-radius: 8px;
            overflow: hidden;
        }

        .chapters-table th,
        .chapters-table td {
            padding: 12px;
            text-align: center;
            border: 1px solid var(--glass-border);
        }

        .chapters-table th {
            background: var(--primary-color);
            color: white;
            font-weight: 600;
        }

        .chapters-table tr:nth-child(even) {
            background: rgba(255, 255, 255, 0.1);
        }

        .checkbox-cell {
            width: 60px;
        }

        .chapter-checkbox {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .strength-section {
            margin-top: 30px;
        }

        .strength-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .add-chapter-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
        }

        .strength-category {
            min-height: 150px;
            border: 2px dashed var(--glass-border);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .strength-category.dragover {
            border-color: var(--primary-color);
            background: rgba(74, 144, 226, 0.1);
        }

        .strength-chapter {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 6px;
            padding: 10px;
            margin-bottom: 8px;
            cursor: move;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .strength-chapter:hover {
            background: rgba(74, 144, 226, 0.2);
        }

        .delete-strength-chapter {
            background: #e74c3c;
            color: white;
            border: none;
            border-radius: 4px;
            padding: 4px 8px;
            cursor: pointer;
            font-size: 0.8rem;
        }

        .table-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        /* NEW CINEMA STYLES */
        .cinema-tabs {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .cinema-tab {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            padding: 20px 40px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            font-size: 1.2rem;
            text-align: center;
            min-width: 150px;
        }

        .cinema-tab:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }

        .cinema-tab.active {
            background: var(--primary-color);
            color: white;
        }

        .fav-ones-tabs {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .fav-tab {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            padding: 25px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            font-size: 1.1rem;
            text-align: center;
            min-height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .fav-tab:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }

        .fav-tab.romcom {
            background: linear-gradient(135deg, #ffb6c1, #ff69b4);
            color: white;
        }

        .fav-tab.action {
            background: linear-gradient(135deg, #ff6b6b, #c44569);
            color: white;
        }

        .fav-tab.comedy {
            background: linear-gradient(135deg, #4a90e2, #0077b6);
            color: white;
        }

        .fav-tab.mindbending {
            background: linear-gradient(135deg, #2d3436, #000000);
            color: white;
        }

        .fav-tab.peace {
            background: linear-gradient(135deg, #ffffff, #f8f9fa);
            color: #333;
            border: 2px solid var(--glass-border);
        }

        .search-box {
            margin-bottom: 20px;
        }

        .search-input {
            width: 100%;
            padding: 12px 20px;
            border-radius: 25px;
            border: 1px solid var(--glass-border);
            background: var(--glass-bg);
            color: var(--text-color);
            backdrop-filter: var(--blur);
            -webkit-backdrop-filter: var(--blur);
            font-size: 1rem;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .movie-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }

        .movie-stat {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
        }

        .movie-stat-value {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .movie-stat-label {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        @media (max-width: 768px) {
            .widgets-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
            
            .name {
                font-size: 2rem;
            }
            
            .welcome-title {
                font-size: 2.5rem;
            }
            
            .welcome-name {
                font-size: 2rem;
            }
            
            .strength-categories {
                flex-direction: column;
            }
            
            .countdown-display {
                flex-wrap: wrap;
            }
            
            .countdown-unit {
                min-width: 70px;
            }
            
            .projects-grid {
                grid-template-columns: 1fr;
            }
            
            .project-images {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .education-subjects {
                flex-direction: column;
            }
            
            .chapters-table {
                font-size: 0.8rem;
            }
            
            .chapters-table th,
            .chapters-table td {
                padding: 6px;
            }
            
            .table-header {
                flex-direction: column;
                gap: 10px;
                align-items: flex-start;
            }
            
            .cinema-tabs {
                flex-direction: column;
                align-items: center;
            }
            
            .cinema-tab {
                width: 100%;
                max-width: 300px;
            }
            
            .fav-ones-tabs {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body class="theme-sky-blue">
    <!-- Falling Petals -->
    <div id="petals-container"></div>

    <!-- Welcome Page -->
    <div id="welcome-page" class="page active">
        <div class="welcome-container">
            <h1 class="welcome-title">OmniTrack</h1>
            <p class="welcome-subtitle">Your Personal Dashboard</p>
            <h2 class="welcome-name">Rohan Pandey</h2>
            <p class="welcome-line">"Track your life, master your time, and achieve your goals with OmniTrack - your all-in-one personal management solution."</p>
            <button class="start-btn" id="start-btn">Get Started</button>
        </div>
    </div>

    <!-- Dashboard Page -->
    <div id="dashboard-page" class="page">
        <div class="container">
            <header>
                <div class="back-btn" id="back-to-welcome">←</div>
                <h1 class="name">Rohan Pandey</h1>
                <div class="settings-btn" id="settings-btn">⚙️</div>
            </header>

            <div class="widgets-grid">
                <div class="widget" data-module="clock">
                    <div class="widget-icon">🕒</div>
                    <div class="widget-title">Live Clock</div>
                </div>
                <div class="widget" data-module="calendar">
                    <div class="widget-icon">📅</div>
                    <div class="widget-title">Calendar</div>
                </div>
                <div class="widget" data-module="screen-time">
                    <div class="widget-icon">📱</div>
                    <div class="widget-title">Screen Time</div>
                </div>
                <div class="widget" data-module="fitness">
                    <div class="widget-icon">💪</div>
                    <div class="widget-title">My Fitness</div>
                </div>
                <div class="widget" data-module="education">
                    <div class="widget-icon">📚</div>
                    <div class="widget-title">Education</div>
                </div>
                <div class="widget" data-module="todo">
                    <div class="widget-icon">✅</div>
                    <div class="widget-title">To-Do List</div>
                </div>
                <div class="widget" data-module="countdown">
                    <div class="widget-icon">⏳</div>
                    <div class="widget-title">Countdown Timer</div>
                </div>
                <div class="widget" data-module="clothing">
                    <div class="widget-icon">👕</div>
                    <div class="widget-title">Clothing Collection</div>
                </div>
                <div class="widget" data-module="projects">
                    <div class="widget-icon">🚀</div>
                    <div class="widget-title">My Projects</div>
                </div>
                <!-- NEW CINEMA WIDGET -->
                <div class="widget" data-module="cinema">
                    <div class="widget-icon">🎬</div>
                    <div class="widget-title">Cinema</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Module Pages -->
    <div id="module-pages">
        <!-- Clock Module -->
        <div id="clock-page" class="page">
            <div class="container">
                <div class="back-btn" id="back-from-clock">←</div>
                <div class="module-content">
                    <h2>Live Clock</h2>
                    <div style="text-align: center; padding: 40px 0;">
                        <div id="live-clock" style="font-size: 3rem; font-weight: 700;"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Calendar Module -->
        <div id="calendar-page" class="page">
            <div class="container">
                <div class="back-btn" id="back-from-calendar">←</div>
                <div class="module-content">
                    <h2>Calendar</h2>
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <button class="btn btn-secondary" id="prev-month">&lt;</button>
                        <h3 id="current-month" style="margin: 0;"></h3>
                        <button class="btn btn-secondary" id="next-month">&gt;</button>
                    </div>
                    <div class="calendar-header">
                        <div class="calendar-header-day">Sun</div>
                        <div class="calendar-header-day">Mon</div>
                        <div class="calendar-header-day">Tue</div>
                        <div class="calendar-header-day">Wed</div>
                        <div class="calendar-header-day">Thu</div>
                        <div class="calendar-header-day">Fri</div>
                        <div class="calendar-header-day">Sat</div>
                    </div>
                    <div id="calendar-grid" class="calendar-grid"></div>
                    <div>
                        <h3>Events</h3>
                        <div id="events-list" class="items-list"></div>
                        <button class="btn" id="add-event-btn" style="margin-top: 15px;">Add Event</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Screen Time Module -->
        <div id="screen-time-page" class="page">
            <div class="container">
                <div class="back-btn" id="back-from-screen-time">←</div>
                <div class="module-content">
                    <h2>Screen Time Tracker</h2>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-label">Total Screen Time</div>
                            <div class="stat-value" id="total-screen-time">0h</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Most Used App</div>
                            <div class="stat-value" id="most-used-app">-</div>
                        </div>
                    </div>
                    <div style="margin-top: 20px;">
                        <h3>App Usage</h3>
                        <div id="screen-time-list" class="items-list"></div>
                        <button class="btn" id="add-screen-time-btn" style="margin-top: 15px;">Add Entry</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Fitness Module -->
        <div id="fitness-page" class="page">
            <div class="container">
                <div class="back-btn" id="back-from-fitness">←</div>
                <div class="module-content">
                    <h2>My Fitness</h2>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-label">Weight</div>
                            <div class="stat-value" id="weight-value">51kg</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Height</div>
                            <div class="stat-value" id="height-value">5'9"</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Push-ups</div>
                            <div class="stat-value" id="pushups-value">24</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Pull-ups</div>
                            <div class="stat-value" id="pullups-value">8</div>
                        </div>
                    </div>
                    <div style="margin-top: 20px;">
                        <h3>Update Records</h3>
                        <div class="form-group">
                            <label for="weight-input">Weight (kg)</label>
                            <input type="text" id="weight-input" value="51">
                        </div>
                        <div class="form-group">
                            <label for="height-input">Height</label>
                            <input type="text" id="height-input" value="5'9">
                        </div>
                        <div class="form-group">
                            <label for="pushups-input">Push-ups</label>
                            <input type="number" id="pushups-input" value="24">
                        </div>
                        <div class="form-group">
                            <label for="pullups-input">Pull-ups</label>
                            <input type="number" id="pullups-input" value="8">
                        </div>
                        <button class="btn" id="update-fitness-btn">Update</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Education Module -->
        <div id="education-page" class="page">
            <div class="container">
                <div class="back-btn" id="back-from-education">←</div>
                <div class="module-content">
                    <h2>Education Manager</h2>
                    
                    <!-- Subject Tabs -->
                    <div class="education-subjects">
                        <div class="subject-tab active" data-subject="chemistry">CHEMISTRY</div>
                        <div class="subject-tab" data-subject="physics">PHYSICS</div>
                        <div class="subject-tab" data-subject="math">MATH</div>
                    </div>

                    <!-- Chapters Table -->
                    <div id="chapters-table-container">
                        <div class="table-header">
                            <h3>Chapters Progress</h3>
                            <button class="add-chapter-btn" id="add-table-chapter">Add New Chapter</button>
                        </div>
                        <table class="chapters-table">
                            <thead>
                                <tr>
                                    <th>S.No.</th>
                                    <th>Name</th>
                                    <th>PW</th>
                                    <th>Oneshot</th>
                                    <th>Revision</th>
                                    <th>Notes</th>
                                    <th>Ques</th>
                                    <th>Final</th>
                                </tr>
                            </thead>
                            <tbody id="chapters-tbody">
                                <!-- Chapters will be loaded here -->
                            </tbody>
                        </table>
                    </div>

                    <!-- Strength Categories -->
                    <div class="strength-section">
                        <div class="strength-header">
                            <h3>Strength Categories</h3>
                            <button class="add-chapter-btn" id="add-strength-chapter">Add New Chapter</button>
                        </div>
                        
                        <div class="strength-categories">
                            <div class="strength-category" data-strength="strong">
                                <div class="category-title">Strong</div>
                                <div id="strong-chapters" class="strength-chapters-list"></div>
                            </div>
                            <div class="strength-category" data-strength="medium">
                                <div class="category-title">Medium</div>
                                <div id="medium-chapters" class="strength-chapters-list"></div>
                            </div>
                            <div class="strength-category" data-strength="weak">
                                <div class="category-title">Weak</div>
                                <div id="weak-chapters" class="strength-chapters-list"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- To-Do Module -->
        <div id="todo-page" class="page">
            <div class="container">
                <div class="back-btn" id="back-from-todo">←</div>
                <div class="module-content">
                    <h2>To-Do List</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" id="add-todo-btn">Add Task</button>
                    </div>
                    <div id="todo-list" class="items-list"></div>
                </div>
            </div>
        </div>

        <!-- Countdown Module -->
        <div id="countdown-page" class="page">
            <div class="container">
                <div class="back-btn" id="back-from-countdown">←</div>
                <div class="module-content">
                    <h2>Countdown Timer</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" id="add-countdown-btn">Add Countdown</button>
                    </div>
                    <div id="countdown-list"></div>
                </div>
            </div>
        </div>

        <!-- Clothing Module -->
        <div id="clothing-page" class="page">
            <div class="container">
                <div class="back-btn" id="back-from-clothing">←</div>
                <div class="module-content">
                    <h2>Clothing Collection</h2>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-label">Total Items</div>
                            <div class="stat-value" id="total-items">0</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Total Value</div>
                            <div class="stat-value" id="total-value">₹0</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Largest Category</div>
                            <div class="stat-value" id="largest-category">-</div>
                        </div>
                    </div>
                    <div style="margin-top: 20px;">
                        <h3>Categories</h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 10px; margin-top: 15px;">
                            <div class="widget" data-category="shirts">
                                <div class="widget-icon">👔</div>
                                <div class="widget-title">Shirts</div>
                            </div>
                            <div class="widget" data-category="pants">
                                <div class="widget-icon">👖</div>
                                <div class="widget-title">Pants</div>
                            </div>
                            <div class="widget" data-category="tshirts">
                                <div class="widget-icon">👕</div>
                                <div class="widget-title">T-Shirts</div>
                            </div>
                            <div class="widget" data-category="trousers">
                                <div class="widget-icon">🩳</div>
                                <div class="widget-title">Trousers</div>
                            </div>
                            <div class="widget" data-category="shoes">
                                <div class="widget-icon">👟</div>
                                <div class="widget-title">Shoes</div>
                            </div>
                            <div class="widget" data-category="winter">
                                <div class="widget-icon">🧥</div>
                                <div class="widget-title">Winter</div>
                            </div>
                            <div class="widget" data-category="wishlist">
                                <div class="widget-icon">⭐</div>
                                <div class="widget-title">Wishlist</div>
                            </div>
                        </div>
                    </div>
                    <div id="clothing-items" style="margin-top: 20px;"></div>
                </div>
            </div>
        </div>

        <!-- Projects Module -->
        <div id="projects-page" class="page">
            <div class="container">
                <div class="back-btn" id="back-from-projects">←</div>
                <div class="module-content">
                    <div class="projects-header">
                        <h2>My Projects</h2>
                        <button class="btn" id="add-project-btn">+ New Project</button>
                    </div>
                    
                    <div id="projects-grid" class="projects-grid">
                        <!-- Projects will be dynamically loaded here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- NEW CINEMA MODULE -->
        <div id="cinema-page" class="page">
            <div class="container">
                <div class="back-btn" id="back-from-cinema">←</div>
                <div class="module-content">
                    <h2>Cinema Collection</h2>
                    
                    <!-- Main Cinema Tabs -->
                    <div class="cinema-tabs">
                        <div class="cinema-tab active" data-cinema-tab="watched">WATCHED</div>
                        <div class="cinema-tab" data-cinema-tab="wishlist">WISH LIST</div>
                        <div class="cinema-tab" data-cinema-tab="favones">FAV ONES</div>
                    </div>

                    <!-- Watched Movies Section -->
                    <div id="watched-section" class="cinema-section active">
                        <div class="movie-stats">
                            <div class="movie-stat">
                                <div class="movie-stat-value" id="watched-count">0</div>
                                <div class="movie-stat-label">Movies Watched</div>
                            </div>
                            <div class="movie-stat">
                                <div class="movie-stat-value" id="total-duration">0h</div>
                                <div class="movie-stat-label">Total Duration</div>
                            </div>
                            <div class="movie-stat">
                                <div class="movie-stat-value" id="top-genre">-</div>
                                <div class="movie-stat-label">Top Genre</div>
                            </div>
                        </div>

                        <div class="search-box">
                            <input type="text" class="search-input" id="watched-search" placeholder="Search watched movies...">
                        </div>

                        <div style="margin-bottom: 20px;">
                            <button class="btn" id="add-watched-btn">Add Watched Movie</button>
                        </div>
                        <div id="watched-list" class="items-list"></div>
                    </div>

                    <!-- Wishlist Section -->
                    <div id="wishlist-section" class="cinema-section">
                        <div class="movie-stats">
                            <div class="movie-stat">
                                <div class="movie-stat-value" id="wishlist-count">0</div>
                                <div class="movie-stat-label">Movies in Wishlist</div>
                            </div>
                        </div>

                        <div class="search-box">
                            <input type="text" class="search-input" id="wishlist-search" placeholder="Search wishlist movies...">
                        </div>

                        <div style="margin-bottom: 20px;">
                            <button class="btn" id="add-wishlist-btn">Add to Wishlist</button>
                        </div>
                        <div id="wishlist-list" class="items-list"></div>
                    </div>

                    <!-- Fav Ones Section -->
                    <div id="favones-section" class="cinema-section">
                        <div class="fav-ones-tabs">
                            <div class="fav-tab romcom" data-genre="romcom">ROMCOM</div>
                            <div class="fav-tab action" data-genre="action">ACTION</div>
                            <div class="fav-tab comedy" data-genre="comedy">COMEDY</div>
                            <div class="fav-tab mindbending" data-genre="mindbending">MINDBENDING</div>
                            <div class="fav-tab peace" data-genre="peace">PEACE</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Genre Pages -->
        <div id="genre-page" class="page">
            <div class="container">
                <div class="back-btn" id="back-from-genre">←</div>
                <div class="module-content">
                    <h2 id="genre-title">Genre Movies</h2>
                    
                    <div class="movie-stats">
                        <div class="movie-stat">
                            <div class="movie-stat-value" id="genre-count">0</div>
                            <div class="movie-stat-label">Movies in Genre</div>
                        </div>
                        <div class="movie-stat">
                            <div class="movie-stat-value" id="genre-duration">0h</div>
                            <div class="movie-stat-label">Total Duration</div>
                        </div>
                    </div>

                    <div class="search-box">
                        <input type="text" class="search-input" id="genre-search" placeholder="Search movies...">
                    </div>

                    <div style="margin-bottom: 20px;">
                        <button class="btn" id="add-genre-btn">Add Movie</button>
                    </div>
                    <div id="genre-list" class="items-list"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn" id="close-settings">&times;</span>
            <div class="modal-header">
                <h2 class="modal-title">Settings</h2>
            </div>
            <div>
                <h3>Theme</h3>
                <div class="theme-selector">
                    <div class="theme-option theme-sky-blue-btn active" data-theme="sky-blue"></div>
                    <div class="theme-option theme-pink-btn" data-theme="pink"></div>
                    <div class="theme-option theme-white-btn" data-theme="white"></div>
                    <div class="theme-option theme-black-btn" data-theme="black"></div>
                </div>
            </div>
            <div class="data-management">
                <h3>Data Management</h3>
                <div style="margin-top: 15px; display: flex; gap: 10px; flex-wrap: wrap;">
                    <button class="btn" id="export-data">Export Data</button>
                    <button class="btn btn-secondary" id="import-data">Import Data</button>
                    <button class="btn btn-secondary" id="reset-data" style="background: #e74c3c;">Reset Data</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Event Modal -->
    <div id="event-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn" id="close-event">&times;</span>
            <div class="modal-header">
                <h2 class="modal-title">Add Event</h2>
            </div>
            <div>
                <div class="form-group">
                    <label for="event-title">Title</label>
                    <input type="text" id="event-title">
                </div>
                <div class="form-group">
                    <label for="event-description">Description</label>
                    <textarea id="event-description"></textarea>
                </div>
                <div class="form-group">
                    <label for="event-date">Date</label>
                    <input type="date" id="event-date">
                </div>
                <div class="form-group">
                    <label for="event-color">Color</label>
                    <select id="event-color">
                        <option value="#4a90e2">Blue</option>
                        <option value="#e91e63">Pink</option>
                        <option value="#4caf50">Green</option>
                        <option value="#ff9800">Orange</option>
                        <option value="#9c27b0">Purple</option>
                    </select>
                </div>
                <button class="btn" id="save-event-btn">Save Event</button>
            </div>
        </div>
    </div>

    <!-- Add Screen Time Modal -->
    <div id="screen-time-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn" id="close-screen-time">&times;</span>
            <div class="modal-header">
                <h2 class="modal-title">Add Screen Time</h2>
            </div>
            <div>
                <div class="form-group">
                    <label for="app-name">App Name</label>
                    <input type="text" id="app-name">
                </div>
                <div class="form-group">
                    <label for="app-hours">Hours Used</label>
                    <input type="number" id="app-hours" min="0" step="0.5">
                </div>
                <button class="btn" id="save-screen-time-btn">Save Entry</button>
            </div>
        </div>
    </div>

    <!-- Add To-Do Modal -->
    <div id="todo-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn" id="close-todo">&times;</span>
            <div class="modal-header">
                <h2 class="modal-title">Add Task</h2>
            </div>
            <div>
                <div class="form-group">
                    <label for="todo-title">Title</label>
                    <input type="text" id="todo-title">
                </div>
                <div class="form-group">
                    <label for="todo-description">Description</label>
                    <textarea id="todo-description"></textarea>
                </div>
                <div class="form-group">
                    <label for="todo-priority">Priority</label>
                    <select id="todo-priority">
                        <option value="high">🔴 High</option>
                        <option value="medium">🟡 Medium</option>
                        <option value="low">🟢 Low</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="todo-category">Category</label>
                    <select id="todo-category">
                        <option value="study">Study</option>
                        <option value="personal">Personal</option>
                        <option value="fitness">Fitness</option>
                        <option value="shopping">Shopping</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="todo-due-date">Due Date</label>
                    <input type="date" id="todo-due-date">
                </div>
                <button class="btn" id="save-todo-btn">Save Task</button>
            </div>
        </div>
    </div>

    <!-- Add Countdown Modal -->
    <div id="countdown-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn" id="close-countdown">&times;</span>
            <div class="modal-header">
                <h2 class="modal-title">Add Countdown</h2>
            </div>
            <div>
                <div class="form-group">
                    <label for="countdown-title">Title</label>
                    <input type="text" id="countdown-title">
                </div>
                <div class="form-group">
                    <label for="countdown-description">Description</label>
                    <textarea id="countdown-description"></textarea>
                </div>
                <div class="form-group">
                    <label for="countdown-date">Target Date</label>
                    <input type="datetime-local" id="countdown-date">
                </div>
                <button class="btn" id="save-countdown-btn">Save Countdown</button>
            </div>
        </div>
    </div>

    <!-- Add Clothing Item Modal -->
    <div id="clothing-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn" id="close-clothing">&times;</span>
            <div class="modal-header">
                <h2 class="modal-title">Add Clothing Item</h2>
            </div>
            <div>
                <div class="form-group">
                    <label for="clothing-name">Name</label>
                    <input type="text" id="clothing-name">
                </div>
                <div class="form-group">
                    <label for="clothing-size">Size</label>
                    <input type="text" id="clothing-size">
                </div>
                <div class="form-group">
                    <label for="clothing-price">Price (₹)</label>
                    <input type="number" id="clothing-price" min="0" step="0.01">
                </div>
                <div class="form-group">
                    <label for="clothing-date">Purchase Date</label>
                    <input type="date" id="clothing-date">
                </div>
                <div class="form-group">
                    <label for="clothing-category">Category</label>
                    <select id="clothing-category">
                        <option value="shirts">Shirts</option>
                        <option value="pants">Pants</option>
                        <option value="tshirts">T-Shirts</option>
                        <option value="trousers">Trousers</option>
                        <option value="shoes">Shoes</option>
                        <option value="winter">Winter Collection</option>
                        <option value="wishlist">Wishlist</option>
                    </select>
                </div>
                <button class="btn" id="save-clothing-btn">Save Item</button>
            </div>
        </div>
    </div>

    <!-- Project Modal -->
    <div id="project-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn" id="close-project">&times;</span>
            <div class="modal-header">
                <h2 class="modal-title" id="project-modal-title">Add New Project</h2>
            </div>
            <div>
                <div class="form-group">
                    <label for="project-name">Project Name</label>
                    <input type="text" id="project-name">
                </div>
                
                <div class="form-group">
                    <label for="project-languages">Coding Languages (comma separated)</label>
                    <input type="text" id="project-languages" placeholder="HTML, CSS, JavaScript, Python">
                </div>
                
                <div class="form-group">
                    <label for="project-description">Project Description</label>
                    <textarea id="project-description" placeholder="Describe your project..."></textarea>
                </div>
                
                <div class="form-group">
                    <label for="project-progress">Progress (%)</label>
                    <input type="range" id="project-progress" min="0" max="100" value="0">
                    <span id="progress-value">0%</span>
                </div>
                
                <div class="form-group">
                    <label>Future Upgrades</label>
                    <div id="upgrades-container">
                        <!-- Upgrades will be added here -->
                    </div>
                    <button type="button" class="btn btn-secondary" id="add-upgrade-btn" style="margin-top: 10px;">+ Add Upgrade</button>
                </div>
                
                <div class="form-group">
                    <label>Project Images (Max 3)</label>
                    <div id="images-container">
                        <!-- Images will be added here -->
                    </div>
                    <div class="image-upload-container" id="image-upload-area">
                        <p>Click to upload image (Max 3)</p>
                        <input type="file" id="image-upload" accept="image/*" style="display: none;">
                    </div>
                </div>
                
                <button class="btn" id="save-project-btn">Save Project</button>
            </div>
        </div>
    </div>

    <!-- Add Table Chapter Modal -->
    <div id="table-chapter-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn" id="close-table-chapter">&times;</span>
            <div class="modal-header">
                <h2 class="modal-title">Add Chapter to Table</h2>
            </div>
            <div>
                <div class="form-group">
                    <label for="table-chapter-name">Chapter Name</label>
                    <input type="text" id="table-chapter-name" placeholder="Enter chapter name">
                </div>
                <button class="btn" id="save-table-chapter-btn">Add Chapter</button>
            </div>
        </div>
    </div>

    <!-- Add Strength Chapter Modal -->
    <div id="strength-chapter-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn" id="close-strength-chapter">&times;</span>
            <div class="modal-header">
                <h2 class="modal-title">Add Chapter to Strength Category</h2>
            </div>
            <div>
                <div class="form-group">
                    <label for="strength-chapter-name">Chapter Name</label>
                    <input type="text" id="strength-chapter-name" placeholder="Enter chapter name">
                </div>
                <div class="form-group">
                    <label for="strength-category-select">Category</label>
                    <select id="strength-category-select">
                        <option value="strong">Strong</option>
                        <option value="medium">Medium</option>
                        <option value="weak">Weak</option>
                    </select>
                </div>
                <button class="btn" id="save-strength-chapter-btn">Add Chapter</button>
            </div>
        </div>
    </div>

    <!-- NEW CINEMA MODALS -->
    <!-- Add Watched Movie Modal -->
    <div id="watched-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn" id="close-watched">&times;</span>
            <div class="modal-header">
                <h2 class="modal-title">Add Watched Movie</h2>
            </div>
            <div>
                <div class="form-group">
                    <label for="watched-name">Movie Name</label>
                    <input type="text" id="watched-name">
                </div>
                <div class="form-group">
                    <label for="watched-genre">Genre</label>
                    <select id="watched-genre">
                        <option value="romcom">RomCom</option>
                        <option value="action">Action</option>
                        <option value="comedy">Comedy</option>
                        <option value="mindbending">Mindbending</option>
                        <option value="peace">Peace</option>
                        <option value="drama">Drama</option>
                        <option value="thriller">Thriller</option>
                        <option value="horror">Horror</option>
                        <option value="sci-fi">Sci-Fi</option>
                        <option value="fantasy">Fantasy</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="watched-duration">Duration (minutes)</label>
                    <input type="number" id="watched-duration" min="1">
                </div>
                <div class="form-group">
                    <label for="watched-actor">Main Actor</label>
                    <input type="text" id="watched-actor">
                </div>
                <button class="btn" id="save-watched-btn">Save Movie</button>
            </div>
        </div>
    </div>

    <!-- Add Wishlist Movie Modal -->
    <div id="wishlist-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn" id="close-wishlist">&times;</span>
            <div class="modal-header">
                <h2 class="modal-title">Add to Wishlist</h2>
            </div>
            <div>
                <div class="form-group">
                    <label for="wishlist-name">Movie Name</label>
                    <input type="text" id="wishlist-name">
                </div>
                <div class="form-group">
                    <label for="wishlist-genre">Genre</label>
                    <select id="wishlist-genre">
                        <option value="romcom">RomCom</option>
                        <option value="action">Action</option>
                        <option value="comedy">Comedy</option>
                        <option value="mindbending">Mindbending</option>
                        <option value="peace">Peace</option>
                        <option value="drama">Drama</option>
                        <option value="thriller">Thriller</option>
                        <option value="horror">Horror</option>
                        <option value="sci-fi">Sci-Fi</option>
                        <option value="fantasy">Fantasy</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="wishlist-duration">Duration (minutes)</label>
                    <input type="number" id="wishlist-duration" min="1">
                </div>
                <div class="form-group">
                    <label for="wishlist-actor">Main Actor</label>
                    <input type="text" id="wishlist-actor">
                </div>
                <button class="btn" id="save-wishlist-btn">Add to Wishlist</button>
            </div>
        </div>
    </div>

    <!-- Add Genre Movie Modal -->
    <div id="genre-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn" id="close-genre">&times;</span>
            <div class="modal-header">
                <h2 class="modal-title" id="genre-modal-title">Add Movie</h2>
            </div>
            <div>
                <div class="form-group">
                    <label for="genre-movie-name">Movie Name</label>
                    <input type="text" id="genre-movie-name">
                </div>
                <div class="form-group">
                    <label for="genre-movie-duration">Duration (minutes)</label>
                    <input type="number" id="genre-movie-duration" min="1">
                </div>
                <div class="form-group">
                    <label for="genre-movie-actor">Main Actor</label>
                    <input type="text" id="genre-movie-actor">
                </div>
                <button class="btn" id="save-genre-movie-btn">Save Movie</button>
            </div>
        </div>
    </div>

    <script>
        // Data Storage - ADD CINEMA KEY
        const STORAGE_KEYS = {
            THEME: 'omnitrack_theme',
            SCREEN_TIME: 'omnitrack_screen_time',
            FITNESS: 'omnitrack_fitness',
            EDUCATION: 'omnitrack_education',
            TODO: 'omnitrack_todo',
            COUNTDOWN: 'omnitrack_countdown',
            CLOTHING: 'omnitrack_clothing',
            CALENDAR: 'omnitrack_calendar',
            PROJECTS: 'omnitrack_projects',
            CINEMA: 'omnitrack_cinema' // NEW
        };

        // Initialize default data - ADD CINEMA INITIALIZATION
        function initializeData() {
            if (!localStorage.getItem(STORAGE_KEYS.THEME)) {
                localStorage.setItem(STORAGE_KEYS.THEME, 'sky-blue');
            }
            
            if (!localStorage.getItem(STORAGE_KEYS.SCREEN_TIME)) {
                localStorage.setItem(STORAGE_KEYS.SCREEN_TIME, JSON.stringify([]));
            }
            
            if (!localStorage.getItem(STORAGE_KEYS.FITNESS)) {
                localStorage.setItem(STORAGE_KEYS.FITNESS, JSON.stringify({
                    weight: '51kg',
                    height: "5'9",
                    pushups: 24,
                    pullups: 8
                }));
            }
            
            // Initialize Education Data - NO PRELOADED CHAPTERS
            if (!localStorage.getItem(STORAGE_KEYS.EDUCATION)) {
                const defaultEducation = {
                    currentSubject: 'chemistry',
                    chemistry: {
                        tableChapters: [],
                        strengthChapters: {
                            strong: [],
                            medium: [],
                            weak: []
                        }
                    },
                    physics: {
                        tableChapters: [],
                        strengthChapters: {
                            strong: [],
                            medium: [],
                            weak: []
                        }
                    },
                    math: {
                        tableChapters: [],
                        strengthChapters: {
                            strong: [],
                            medium: [],
                            weak: []
                        }
                    }
                };
                localStorage.setItem(STORAGE_KEYS.EDUCATION, JSON.stringify(defaultEducation));
            }
            
            if (!localStorage.getItem(STORAGE_KEYS.TODO)) {
                localStorage.setItem(STORAGE_KEYS.TODO, JSON.stringify([]));
            }
            
            if (!localStorage.getItem(STORAGE_KEYS.COUNTDOWN)) {
                localStorage.setItem(STORAGE_KEYS.COUNTDOWN, JSON.stringify([]));
            }
            
            if (!localStorage.getItem(STORAGE_KEYS.CLOTHING)) {
                localStorage.setItem(STORAGE_KEYS.CLOTHING, JSON.stringify({
                    shirts: [],
                    pants: [],
                    tshirts: [],
                    trousers: [],
                    shoes: [],
                    winter: [],
                    wishlist: []
                }));
            }
            
            if (!localStorage.getItem(STORAGE_KEYS.CALENDAR)) {
                localStorage.setItem(STORAGE_KEYS.CALENDAR, JSON.stringify([]));
            }
            
            if (!localStorage.getItem(STORAGE_KEYS.PROJECTS)) {
                localStorage.setItem(STORAGE_KEYS.PROJECTS, JSON.stringify([]));
            }
            
            // NEW: Initialize Cinema Data
            if (!localStorage.getItem(STORAGE_KEYS.CINEMA)) {
                const defaultCinema = {
                    watched: [],
                    wishlist: [],
                    favones: {
                        romcom: [],
                        action: [],
                        comedy: [],
                        mindbending: [],
                        peace: []
                    }
                };
                localStorage.setItem(STORAGE_KEYS.CINEMA, JSON.stringify(defaultCinema));
            }
        }

        // Petals Animation
        function createPetals() {
            const container = document.getElementById('petals-container');
            const petalCount = 15;
            
            for (let i = 0; i < petalCount; i++) {
                const petal = document.createElement('div');
                petal.classList.add('petal');
                
                const size = Math.random() * 10 + 5;
                const left = Math.random() * 100;
                const animationDuration = Math.random() * 10 + 5;
                const animationDelay = Math.random() * 5;
                
                petal.style.width = `${size}px`;
                petal.style.height = `${size}px`;
                petal.style.left = `${left}vw`;
                petal.style.animationDuration = `${animationDuration}s`;
                petal.style.animationDelay = `${animationDelay}s`;
                
                container.appendChild(petal);
            }
        }

        // Page Navigation
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById(pageId).classList.add('active');
        }

        // Theme Management
        function applyTheme(themeName) {
            document.body.className = `theme-${themeName}`;
            localStorage.setItem(STORAGE_KEYS.THEME, themeName);
            
            document.querySelectorAll('.theme-option').forEach(option => {
                option.classList.remove('active');
                if (option.dataset.theme === themeName) {
                    option.classList.add('active');
                }
            });
        }

        // Modal Management
        function openModal(modalId) {
            document.getElementById(modalId).style.display = 'block';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        // Calendar Functions
        let currentMonth = new Date().getMonth();
        let currentYear = new Date().getFullYear();

        function generateCalendar(month, year) {
            const calendarGrid = document.getElementById('calendar-grid');
            const monthNames = ["January", "February", "March", "April", "May", "June",
                "July", "August", "September", "October", "November", "December"];
            
            document.getElementById('current-month').textContent = `${monthNames[month]} ${year}`;
            calendarGrid.innerHTML = '';
            
            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            
            for (let i = 0; i < firstDay; i++) {
                const emptyCell = document.createElement('div');
                emptyCell.classList.add('calendar-day', 'empty');
                calendarGrid.appendChild(emptyCell);
            }
            
            const today = new Date();
            for (let day = 1; day <= daysInMonth; day++) {
                const dayCell = document.createElement('div');
                dayCell.classList.add('calendar-day');
                dayCell.textContent = day;
                
                if (day === today.getDate() && month === today.getMonth() && year === today.getFullYear()) {
                    dayCell.classList.add('today');
                }
                
                dayCell.addEventListener('click', () => {
                    openEventModal(new Date(year, month, day));
                });
                
                calendarGrid.appendChild(dayCell);
            }
        }

        function openEventModal(date) {
            document.getElementById('event-date').value = date.toISOString().split('T')[0];
            openModal('event-modal');
        }

        function saveEvent() {
            const title = document.getElementById('event-title').value;
            const description = document.getElementById('event-description').value;
            const date = document.getElementById('event-date').value;
            const color = document.getElementById('event-color').value;
            
            if (!title) {
                alert('Please enter a title for the event');
                return;
            }
            
            const events = JSON.parse(localStorage.getItem(STORAGE_KEYS.CALENDAR));
            const newEvent = {
                id: Date.now().toString(),
                title,
                description,
                date,
                color
            };
            
            events.push(newEvent);
            localStorage.setItem(STORAGE_KEYS.CALENDAR, JSON.stringify(events));
            
            closeModal('event-modal');
            initializeCalendar();
            alert('Event added successfully!');
        }

        function initializeCalendar() {
            generateCalendar(currentMonth, currentYear);
            
            const events = JSON.parse(localStorage.getItem(STORAGE_KEYS.CALENDAR));
            const eventsList = document.getElementById('events-list');
            eventsList.innerHTML = '';
            
            if (events.length === 0) {
                eventsList.innerHTML = '<p>No events scheduled.</p>';
            } else {
                events.forEach(event => {
                    const eventElement = document.createElement('div');
                    eventElement.className = 'item';
                    eventElement.style.borderLeft = `4px solid ${event.color}`;
                    eventElement.innerHTML = `
                        <div class="item-info">
                            <strong>${event.title}</strong> - ${new Date(event.date).toLocaleDateString()}
                            <div>${event.description || ''}</div>
                        </div>
                        <div class="item-actions">
                            <button class="action-btn delete-btn" data-id="${event.id}">🗑️</button>
                        </div>
                    `;
                    eventsList.appendChild(eventElement);
                    
                    eventElement.querySelector('.delete-btn').addEventListener('click', function() {
                        deleteEvent(event.id);
                    });
                });
            }
        }

        function deleteEvent(eventId) {
            let events = JSON.parse(localStorage.getItem(STORAGE_KEYS.CALENDAR));
            events = events.filter(event => event.id !== eventId);
            localStorage.setItem(STORAGE_KEYS.CALENDAR, JSON.stringify(events));
            initializeCalendar();
        }

        // Clock Functions
        function updateClock() {
            const now = new Date();
            const timeString = now.toLocaleTimeString();
            if (document.getElementById('live-clock')) {
                document.getElementById('live-clock').textContent = timeString;
            }
        }

        // Screen Time Functions
        function initializeScreenTime() {
            const screenTimeData = JSON.parse(localStorage.getItem(STORAGE_KEYS.SCREEN_TIME));
            const screenTimeList = document.getElementById('screen-time-list');
            let totalHours = 0;
            let mostUsedApp = { name: '', hours: 0 };
            
            screenTimeList.innerHTML = '';
            
            if (screenTimeData.length === 0) {
                screenTimeList.innerHTML = '<p>No screen time data recorded.</p>';
            } else {
                screenTimeData.forEach(entry => {
                    totalHours += entry.hours;
                    
                    if (entry.hours > mostUsedApp.hours) {
                        mostUsedApp = { name: entry.app, hours: entry.hours };
                    }
                    
                    const entryElement = document.createElement('div');
                    entryElement.className = 'item';
                    entryElement.innerHTML = `
                        <div class="item-info">
                            <strong>${entry.app}</strong> - ${entry.hours} hours
                        </div>
                        <div class="item-actions">
                            <button class="action-btn delete-btn" data-id="${entry.id}">🗑️</button>
                        </div>
                    `;
                    screenTimeList.appendChild(entryElement);
                    
                    entryElement.querySelector('.delete-btn').addEventListener('click', function() {
                        deleteScreenTime(entry.id);
                    });
                });
            }
            
            document.getElementById('total-screen-time').textContent = `${totalHours}h`;
            document.getElementById('most-used-app').textContent = mostUsedApp.name || '-';
        }

        function saveScreenTime() {
            const appName = document.getElementById('app-name').value;
            const appHours = parseFloat(document.getElementById('app-hours').value);
            
            if (!appName || isNaN(appHours)) {
                alert('Please enter valid app name and hours');
                return;
            }
            
            const screenTimeData = JSON.parse(localStorage.getItem(STORAGE_KEYS.SCREEN_TIME));
            const newEntry = {
                id: Date.now().toString(),
                app: appName,
                hours: appHours
            };
            
            screenTimeData.push(newEntry);
            localStorage.setItem(STORAGE_KEYS.SCREEN_TIME, JSON.stringify(screenTimeData));
            
            closeModal('screen-time-modal');
            initializeScreenTime();
            alert('Screen time entry added successfully!');
        }

        function deleteScreenTime(entryId) {
            let screenTimeData = JSON.parse(localStorage.getItem(STORAGE_KEYS.SCREEN_TIME));
            screenTimeData = screenTimeData.filter(entry => entry.id !== entryId);
            localStorage.setItem(STORAGE_KEYS.SCREEN_TIME, JSON.stringify(screenTimeData));
            initializeScreenTime();
        }

        // Fitness Functions
        function initializeFitness() {
            const fitnessData = JSON.parse(localStorage.getItem(STORAGE_KEYS.FITNESS));
            
            document.getElementById('weight-input').value = fitnessData.weight;
            document.getElementById('height-input').value = fitnessData.height;
            document.getElementById('pushups-input').value = fitnessData.pushups;
            document.getElementById('pullups-input').value = fitnessData.pullups;
            
            document.getElementById('weight-value').textContent = fitnessData.weight;
            document.getElementById('height-value').textContent = fitnessData.height;
            document.getElementById('pushups-value').textContent = fitnessData.pushups;
            document.getElementById('pullups-value').textContent = fitnessData.pullups;
        }

        function updateFitness() {
            const weight = document.getElementById('weight-input').value;
            const height = document.getElementById('height-input').value;
            const pushups = parseInt(document.getElementById('pushups-input').value);
            const pullups = parseInt(document.getElementById('pullups-input').value);
            
            const fitnessData = {
                weight,
                height,
                pushups,
                pullups
            };
            
            localStorage.setItem(STORAGE_KEYS.FITNESS, JSON.stringify(fitnessData));
            
            document.getElementById('weight-value').textContent = weight;
            document.getElementById('height-value').textContent = height;
            document.getElementById('pushups-value').textContent = pushups;
            document.getElementById('pullups-value').textContent = pullups;
            
            alert('Fitness records updated successfully!');
        }

        // FIXED EDUCATION FUNCTIONS - NO PRELOADED CHAPTERS
        let currentSubject = 'chemistry';

        function initializeEducation() {
            const educationData = JSON.parse(localStorage.getItem(STORAGE_KEYS.EDUCATION));
            currentSubject = educationData.currentSubject || 'chemistry';
            
            // Set active subject tab
            document.querySelectorAll('.subject-tab').forEach(tab => {
                tab.classList.remove('active');
                if (tab.dataset.subject === currentSubject) {
                    tab.classList.add('active');
                }
            });
            
            renderChaptersTable(educationData);
            renderStrengthChapters(educationData);
            setupDragAndDrop();
        }

        function renderChaptersTable(educationData) {
            const tbody = document.getElementById('chapters-tbody');
            tbody.innerHTML = '';
            
            const tableChapters = educationData[currentSubject].tableChapters;
            
            if (tableChapters.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="8" style="text-align: center; padding: 20px;">
                            No chapters added yet. Click "Add New Chapter" to get started.
                        </td>
                    </tr>
                `;
            } else {
                tableChapters.forEach((chapter, index) => {
                    const row = document.createElement('tr');
                    
                    row.innerHTML = `
                        <td>${index + 1}</td>
                        <td style="text-align: left; padding-left: 15px;">${chapter.name}</td>
                        <td class="checkbox-cell">
                            <input type="checkbox" class="chapter-checkbox" data-chapter="${index}" data-type="0" ${chapter.progress[0] ? 'checked' : ''}>
                        </td>
                        <td class="checkbox-cell">
                            <input type="checkbox" class="chapter-checkbox" data-chapter="${index}" data-type="1" ${chapter.progress[1] ? 'checked' : ''}>
                        </td>
                        <td class="checkbox-cell">
                            <input type="checkbox" class="chapter-checkbox" data-chapter="${index}" data-type="2" ${chapter.progress[2] ? 'checked' : ''}>
                        </td>
                        <td class="checkbox-cell">
                            <input type="checkbox" class="chapter-checkbox" data-chapter="${index}" data-type="3" ${chapter.progress[3] ? 'checked' : ''}>
                        </td>
                        <td class="checkbox-cell">
                            <input type="checkbox" class="chapter-checkbox" data-chapter="${index}" data-type="4" ${chapter.progress[4] ? 'checked' : ''}>
                        </td>
                        <td class="checkbox-cell">
                            <input type="checkbox" class="chapter-checkbox" data-chapter="${index}" data-type="5" ${chapter.progress[5] ? 'checked' : ''}>
                        </td>
                    `;
                    
                    tbody.appendChild(row);
                });
            }
            
            // Add event listeners to checkboxes
            document.querySelectorAll('.chapter-checkbox').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    updateChapterProgress(
                        parseInt(this.dataset.chapter),
                        parseInt(this.dataset.type),
                        this.checked
                    );
                });
            });
        }

        function updateChapterProgress(chapterIndex, progressType, isCompleted) {
            const educationData = JSON.parse(localStorage.getItem(STORAGE_KEYS.EDUCATION));
            educationData[currentSubject].tableChapters[chapterIndex].progress[progressType] = isCompleted;
            localStorage.setItem(STORAGE_KEYS.EDUCATION, JSON.stringify(educationData));
        }

        function renderStrengthChapters(educationData) {
            const strongContainer = document.getElementById('strong-chapters');
            const mediumContainer = document.getElementById('medium-chapters');
            const weakContainer = document.getElementById('weak-chapters');
            
            strongContainer.innerHTML = '';
            mediumContainer.innerHTML = '';
            weakContainer.innerHTML = '';
            
            const strengthChapters = educationData[currentSubject].strengthChapters;
            
            // Render Strong chapters
            if (strengthChapters.strong.length === 0) {
                strongContainer.innerHTML = '<div style="text-align: center; color: #666; padding: 20px;">No chapters added</div>';
            } else {
                strengthChapters.strong.forEach((chapter, index) => {
                    const chapterElement = createStrengthChapterElement(chapter, 'strong', index);
                    strongContainer.appendChild(chapterElement);
                });
            }
            
            // Render Medium chapters
            if (strengthChapters.medium.length === 0) {
                mediumContainer.innerHTML = '<div style="text-align: center; color: #666; padding: 20px;">No chapters added</div>';
            } else {
                strengthChapters.medium.forEach((chapter, index) => {
                    const chapterElement = createStrengthChapterElement(chapter, 'medium', index);
                    mediumContainer.appendChild(chapterElement);
                });
            }
            
            // Render Weak chapters
            if (strengthChapters.weak.length === 0) {
                weakContainer.innerHTML = '<div style="text-align: center; color: #666; padding: 20px;">No chapters added</div>';
            } else {
                strengthChapters.weak.forEach((chapter, index) => {
                    const chapterElement = createStrengthChapterElement(chapter, 'weak', index);
                    weakContainer.appendChild(chapterElement);
                });
            }
        }

        function createStrengthChapterElement(chapterName, strength, index) {
            const chapterElement = document.createElement('div');
            chapterElement.className = 'strength-chapter';
            chapterElement.draggable = true;
            chapterElement.dataset.chapterName = chapterName;
            chapterElement.dataset.strength = strength;
            chapterElement.dataset.index = index;
            
            chapterElement.innerHTML = `
                <span>${chapterName}</span>
                <button class="delete-strength-chapter">×</button>
            `;
            
            chapterElement.querySelector('.delete-strength-chapter').addEventListener('click', function(e) {
                e.stopPropagation();
                deleteStrengthChapter(chapterName, strength);
            });
            
            return chapterElement;
        }

        function setupDragAndDrop() {
            const strengthChapters = document.querySelectorAll('.strength-chapter');
            const categories = document.querySelectorAll('.strength-category');
            
            strengthChapters.forEach(chapter => {
                chapter.addEventListener('dragstart', (e) => {
                    e.dataTransfer.setData('text/plain', JSON.stringify({
                        name: chapter.dataset.chapterName,
                        fromStrength: chapter.dataset.strength,
                        index: chapter.dataset.index
                    }));
                });
            });
            
            categories.forEach(category => {
                category.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    category.classList.add('dragover');
                });
                
                category.addEventListener('dragleave', () => {
                    category.classList.remove('dragover');
                });
                
                category.addEventListener('drop', (e) => {
                    e.preventDefault();
                    category.classList.remove('dragover');
                    
                    const data = JSON.parse(e.dataTransfer.getData('text/plain'));
                    const newStrength = category.dataset.strength;
                    
                    if (data.fromStrength !== newStrength) {
                        moveStrengthChapter(data.name, data.fromStrength, newStrength);
                    }
                });
            });
        }

        function moveStrengthChapter(chapterName, fromStrength, toStrength) {
            const educationData = JSON.parse(localStorage.getItem(STORAGE_KEYS.EDUCATION));
            
            // Remove from old strength category
            educationData[currentSubject].strengthChapters[fromStrength] = 
                educationData[currentSubject].strengthChapters[fromStrength].filter(chapter => chapter !== chapterName);
            
            // Add to new strength category
            if (!educationData[currentSubject].strengthChapters[toStrength].includes(chapterName)) {
                educationData[currentSubject].strengthChapters[toStrength].push(chapterName);
            }
            
            localStorage.setItem(STORAGE_KEYS.EDUCATION, JSON.stringify(educationData));
            renderStrengthChapters(educationData);
            setupDragAndDrop();
        }

        function deleteStrengthChapter(chapterName, strength) {
            const educationData = JSON.parse(localStorage.getItem(STORAGE_KEYS.EDUCATION));
            
            educationData[currentSubject].strengthChapters[strength] = 
                educationData[currentSubject].strengthChapters[strength].filter(chapter => chapter !== chapterName);
            
            localStorage.setItem(STORAGE_KEYS.EDUCATION, JSON.stringify(educationData));
            renderStrengthChapters(educationData);
            setupDragAndDrop();
        }

        function addTableChapter() {
            openModal('table-chapter-modal');
        }

        function saveTableChapter() {
            const chapterName = document.getElementById('table-chapter-name').value;
            
            if (!chapterName.trim()) {
                alert('Please enter a chapter name');
                return;
            }
            
            const educationData = JSON.parse(localStorage.getItem(STORAGE_KEYS.EDUCATION));
            
            // Check if chapter already exists in table
            const existingChapter = educationData[currentSubject].tableChapters.find(chapter => chapter.name === chapterName);
            if (existingChapter) {
                alert('This chapter already exists in the table');
                return;
            }
            
            // Add to table chapters with empty progress
            const newChapter = {
                name: chapterName,
                progress: [false, false, false, false, false, false]
            };
            
            educationData[currentSubject].tableChapters.push(newChapter);
            localStorage.setItem(STORAGE_KEYS.EDUCATION, JSON.stringify(educationData));
            
            closeModal('table-chapter-modal');
            renderChaptersTable(educationData);
            
            // Clear the input
            document.getElementById('table-chapter-name').value = '';
            
            alert('Chapter added successfully to table!');
        }

        function addStrengthChapter() {
            openModal('strength-chapter-modal');
        }

        function saveStrengthChapter() {
            const chapterName = document.getElementById('strength-chapter-name').value;
            const strength = document.getElementById('strength-category-select').value;
            
            if (!chapterName.trim()) {
                alert('Please enter a chapter name');
                return;
            }
            
            const educationData = JSON.parse(localStorage.getItem(STORAGE_KEYS.EDUCATION));
            
            // Check if chapter already exists in any strength category
            const allChapters = [
                ...educationData[currentSubject].strengthChapters.strong,
                ...educationData[currentSubject].strengthChapters.medium,
                ...educationData[currentSubject].strengthChapters.weak
            ];
            
            if (allChapters.includes(chapterName)) {
                alert('This chapter already exists in strength categories');
                return;
            }
            
            // Add to selected strength category
            educationData[currentSubject].strengthChapters[strength].push(chapterName);
            localStorage.setItem(STORAGE_KEYS.EDUCATION, JSON.stringify(educationData));
            
            closeModal('strength-chapter-modal');
            renderStrengthChapters(educationData);
            setupDragAndDrop();
            
            // Clear the input
            document.getElementById('strength-chapter-name').value = '';
            
            alert('Chapter added successfully to strength category!');
        }

        // To-Do Functions
        function initializeTodo() {
            const todoData = JSON.parse(localStorage.getItem(STORAGE_KEYS.TODO));
            const todoList = document.getElementById('todo-list');
            
            renderTodoList(todoData, todoList);
        }

        function renderTodoList(todoData, container) {
            container.innerHTML = '';
            
            if (todoData.length === 0) {
                container.innerHTML = '<p>No tasks yet. Add your first task!</p>';
            } else {
                todoData.forEach(task => {
                    const taskElement = document.createElement('div');
                    taskElement.className = 'item';
                    
                    const priorityIcons = {
                        high: '🔴',
                        medium: '🟡',
                        low: '🟢'
                    };
                    
                    const categoryColors = {
                        study: '#4a90e2',
                        personal: '#e91e63',
                        fitness: '#4caf50',
                        shopping: '#ff9800'
                    };
                    
                    taskElement.innerHTML = `
                        <div class="item-info">
                            <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 5px;">
                                <span class="todo-priority">${priorityIcons[task.priority]}</span>
                                <strong>${task.title}</strong>
                                <span class="todo-category" style="background: ${categoryColors[task.category]}">${task.category}</span>
                            </div>
                            <div>${task.description || ''}</div>
                            <div style="font-size: 0.8rem; margin-top: 5px;">
                                Due: ${new Date(task.dueDate).toLocaleDateString()}
                            </div>
                        </div>
                        <div class="item-actions">
                            <button class="action-btn toggle-btn" data-id="${task.id}">${task.completed ? '↶' : '✓'}</button>
                            <button class="action-btn delete-btn" data-id="${task.id}">🗑️</button>
                        </div>
                    `;
                    
                    if (task.completed) {
                        taskElement.style.opacity = '0.7';
                        taskElement.style.textDecoration = 'line-through';
                    }
                    
                    container.appendChild(taskElement);
                    
                    taskElement.querySelector('.toggle-btn').addEventListener('click', function() {
                        toggleTodo(task.id);
                    });
                    
                    taskElement.querySelector('.delete-btn').addEventListener('click', function() {
                        deleteTodo(task.id);
                    });
                });
            }
        }

        function saveTodo() {
            const title = document.getElementById('todo-title').value;
            const description = document.getElementById('todo-description').value;
            const priority = document.getElementById('todo-priority').value;
            const category = document.getElementById('todo-category').value;
            const dueDate = document.getElementById('todo-due-date').value;
            
            if (!title || !dueDate) {
                alert('Please enter a title and due date for the task');
                return;
            }
            
            const todoData = JSON.parse(localStorage.getItem(STORAGE_KEYS.TODO));
            const newTask = {
                id: Date.now().toString(),
                title,
                description,
                priority,
                category,
                dueDate,
                completed: false
            };
            
            todoData.push(newTask);
            localStorage.setItem(STORAGE_KEYS.TODO, JSON.stringify(todoData));
            
            closeModal('todo-modal');
            initializeTodo();
            alert('Task added successfully!');
        }

        function toggleTodo(taskId) {
            let todoData = JSON.parse(localStorage.getItem(STORAGE_KEYS.TODO));
            todoData = todoData.map(task => {
                if (task.id === taskId) {
                    task.completed = !task.completed;
                }
                return task;
            });
            
            localStorage.setItem(STORAGE_KEYS.TODO, JSON.stringify(todoData));
            initializeTodo();
        }

        function deleteTodo(taskId) {
            let todoData = JSON.parse(localStorage.getItem(STORAGE_KEYS.TODO));
            todoData = todoData.filter(task => task.id !== taskId);
            localStorage.setItem(STORAGE_KEYS.TODO, JSON.stringify(todoData));
            initializeTodo();
        }

        // Countdown Functions
        function initializeCountdown() {
            const countdownData = JSON.parse(localStorage.getItem(STORAGE_KEYS.COUNTDOWN));
            const countdownList = document.getElementById('countdown-list');
            
            renderCountdowns(countdownData, countdownList);
        }

        function renderCountdowns(countdownData, container) {
            container.innerHTML = '';
            
            if (countdownData.length === 0) {
                container.innerHTML = '<p>No countdowns set. Add your first countdown!</p>';
            } else {
                countdownData.forEach(countdown => {
                    const now = new Date().getTime();
                    const targetDate = new Date(countdown.targetDate).getTime();
                    const timeLeft = targetDate - now;
                    
                    if (timeLeft < 0) {
                        const countdownElement = document.createElement('div');
                        countdownElement.className = 'item';
                        countdownElement.innerHTML = `
                            <div class="item-info">
                                <strong>${countdown.title}</strong>
                                <div>${countdown.description || ''}</div>
                                <div style="color: #e74c3c; font-weight: 600;">Event has passed!</div>
                            </div>
                            <div class="item-actions">
                                <button class="action-btn delete-btn" data-id="${countdown.id}">🗑️</button>
                            </div>
                        `;
                        container.appendChild(countdownElement);
                        
                        countdownElement.querySelector('.delete-btn').addEventListener('click', function() {
                            deleteCountdown(countdown.id);
                        });
                    } else {
                        const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
                        const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                        const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
                        const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);
                        
                        const countdownElement = document.createElement('div');
                        countdownElement.className = 'item';
                        countdownElement.innerHTML = `
                            <div class="item-info">
                                <strong>${countdown.title}</strong>
                                <div>${countdown.description || ''}</div>
                                <div class="countdown-display">
                                    <div class="countdown-unit">
                                        <div class="countdown-value">${days}</div>
                                        <div class="countdown-label">Days</div>
                                    </div>
                                    <div class="countdown-unit">
                                        <div class="countdown-value">${hours}</div>
                                        <div class="countdown-label">Hours</div>
                                    </div>
                                    <div class="countdown-unit">
                                        <div class="countdown-value">${minutes}</div>
                                        <div class="countdown-label">Minutes</div>
                                    </div>
                                    <div class="countdown-unit">
                                        <div class="countdown-value">${seconds}</div>
                                        <div class="countdown-label">Seconds</div>
                                    </div>
                                </div>
                            </div>
                            <div class="item-actions">
                                <button class="action-btn delete-btn" data-id="${countdown.id}">🗑️</button>
                            </div>
                        `;
                        container.appendChild(countdownElement);
                        
                        countdownElement.querySelector('.delete-btn').addEventListener('click', function() {
                            deleteCountdown(countdown.id);
                        });
                    }
                });
            }
        }

        function saveCountdown() {
            const title = document.getElementById('countdown-title').value;
            const description = document.getElementById('countdown-description').value;
            const targetDate = document.getElementById('countdown-date').value;
            
            if (!title || !targetDate) {
                alert('Please enter a title and target date for the countdown');
                return;
            }
            
            const countdownData = JSON.parse(localStorage.getItem(STORAGE_KEYS.COUNTDOWN));
            const newCountdown = {
                id: Date.now().toString(),
                title,
                description,
                targetDate
            };
            
            countdownData.push(newCountdown);
            localStorage.setItem(STORAGE_KEYS.COUNTDOWN, JSON.stringify(countdownData));
            
            closeModal('countdown-modal');
            initializeCountdown();
            alert('Countdown added successfully!');
        }

        function deleteCountdown(countdownId) {
            let countdownData = JSON.parse(localStorage.getItem(STORAGE_KEYS.COUNTDOWN));
            countdownData = countdownData.filter(countdown => countdown.id !== countdownId);
            localStorage.setItem(STORAGE_KEYS.COUNTDOWN, JSON.stringify(countdownData));
            initializeCountdown();
        }

        // Clothing Functions
        function initializeClothing() {
            const clothingData = JSON.parse(localStorage.getItem(STORAGE_KEYS.CLOTHING));
            
            let totalItems = 0;
            let totalValue = 0;
            let categoryCounts = {};
            let largestCategory = { name: '', count: 0 };
            
            Object.entries(clothingData).forEach(([category, items]) => {
                categoryCounts[category] = items.length;
                totalItems += items.length;
                
                if (items.length > largestCategory.count) {
                    largestCategory = { name: category, count: items.length };
                }
                
                items.forEach(item => {
                    totalValue += parseFloat(item.price) || 0;
                });
            });
            
            document.getElementById('total-items').textContent = totalItems;
            document.getElementById('total-value').textContent = `₹${totalValue.toFixed(2)}`;
            document.getElementById('largest-category').textContent = 
                largestCategory.name ? formatCategoryName(largestCategory.name) : '-';
            
            document.querySelectorAll('[data-category]').forEach(categoryWidget => {
                categoryWidget.addEventListener('click', () => {
                    const category = categoryWidget.dataset.category;
                    showClothingCategory(category, clothingData[category]);
                });
            });
            
            showClothingCategory('shirts', clothingData.shirts);
        }

        function formatCategoryName(category) {
            const names = {
                shirts: 'Shirts',
                pants: 'Pants',
                tshirts: 'T-Shirts',
                trousers: 'Trousers',
                shoes: 'Shoes',
                winter: 'Winter Collection',
                wishlist: 'Wishlist'
            };
            return names[category] || category;
        }

        function showClothingCategory(category, items) {
            const clothingItems = document.getElementById('clothing-items');
            const categoryName = formatCategoryName(category);
            
            let itemsHTML = `
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                    <h3>${categoryName}</h3>
                    <button class="btn" id="add-clothing-item-btn" data-category="${category}">Add Item</button>
                </div>
            `;
            
            if (items.length === 0) {
                itemsHTML += '<p>No items in this category.</p>';
            } else {
                items.forEach(item => {
                    itemsHTML += `
                        <div class="item">
                            <div class="item-info">
                                <strong>${item.name}</strong>
                                <div>Size: ${item.size} | Price: ₹${item.price} | Purchased: ${new Date(item.purchaseDate).toLocaleDateString()}</div>
                            </div>
                            <div class="item-actions">
                                <button class="action-btn delete-btn" data-id="${item.id}" data-category="${category}">🗑️</button>
                            </div>
                        </div>
                    `;
                });
            }
            
            clothingItems.innerHTML = itemsHTML;
            
            document.getElementById('add-clothing-item-btn').addEventListener('click', function() {
                openClothingModal(this.dataset.category);
            });
            
            document.querySelectorAll('.delete-btn[data-category]').forEach(btn => {
                btn.addEventListener('click', function() {
                    deleteClothingItem(this.dataset.category, this.dataset.id);
                });
            });
        }

        function openClothingModal(category) {
            document.getElementById('clothing-category').value = category;
            openModal('clothing-modal');
        }

        function saveClothingItem() {
            const name = document.getElementById('clothing-name').value;
            const size = document.getElementById('clothing-size').value;
            const price = parseFloat(document.getElementById('clothing-price').value);
            const purchaseDate = document.getElementById('clothing-date').value;
            const category = document.getElementById('clothing-category').value;
            
            if (!name || !size || isNaN(price) || !purchaseDate) {
                alert('Please fill all fields with valid data');
                return;
            }
            
            const clothingData = JSON.parse(localStorage.getItem(STORAGE_KEYS.CLOTHING));
            const newItem = {
                id: Date.now().toString(),
                name,
                size,
                price,
                purchaseDate
            };
            
            clothingData[category].push(newItem);
            localStorage.setItem(STORAGE_KEYS.CLOTHING, JSON.stringify(clothingData));
            
            closeModal('clothing-modal');
            initializeClothing();
            alert('Clothing item added successfully!');
        }

        function deleteClothingItem(category, itemId) {
            const clothingData = JSON.parse(localStorage.getItem(STORAGE_KEYS.CLOTHING));
            clothingData[category] = clothingData[category].filter(item => item.id !== itemId);
            localStorage.setItem(STORAGE_KEYS.CLOTHING, JSON.stringify(clothingData));
            initializeClothing();
        }

        // Projects Functions
        function initializeProjects() {
            const projectsData = JSON.parse(localStorage.getItem(STORAGE_KEYS.PROJECTS));
            const projectsGrid = document.getElementById('projects-grid');
            
            projectsGrid.innerHTML = '';
            
            if (projectsData.length === 0) {
                projectsGrid.innerHTML = '<p>No projects yet. Add your first project!</p>';
            } else {
                projectsData.forEach(project => {
                    const projectCard = document.createElement('div');
                    projectCard.className = 'project-card';
                    projectCard.dataset.projectId = project.id;
                    
                    projectCard.innerHTML = `
                        <div class="project-name">${project.name}</div>
                        <div class="project-languages">
                            ${project.languages.map(lang => `<span class="language-tag">${lang}</span>`).join('')}
                        </div>
                        <div class="project-description">${project.description}</div>
                        
                        <div class="progress-bar-container">
                            <div class="progress-bar" style="width: ${project.progress}%"></div>
                        </div>
                        <div style="text-align: center; margin-bottom: 10px;">${project.progress}% Complete</div>
                        
                        ${project.images.length > 0 ? `
                        <div class="project-images">
                            ${project.images.slice(0, 3).map(img => `
                                <img src="${img.data}" alt="${img.title}" class="project-image">
                            `).join('')}
                        </div>
                        ` : ''}
                        
                        ${project.upgrades.length > 0 ? `
                        <div class="upgrades-list">
                            <strong>Future Upgrades:</strong>
                            ${project.upgrades.slice(0, 3).map(upgrade => `
                                <div class="upgrade-item">
                                    <span class="upgrade-priority priority-${upgrade.priority}">${upgrade.priority}</span>
                                    ${upgrade.description}
                                </div>
                            `).join('')}
                            ${project.upgrades.length > 3 ? `<div>... and ${project.upgrades.length - 3} more</div>` : ''}
                        </div>
                        ` : ''}
                        
                        <div style="margin-top: 15px; text-align: center;">
                            <button class="edit-btn" data-project-id="${project.id}">Edit Project</button>
                        </div>
                    `;
                    
                    projectsGrid.appendChild(projectCard);
                    
                    projectCard.querySelector('.edit-btn').addEventListener('click', function(e) {
                        e.stopPropagation();
                        openProjectModal(this.dataset.projectId);
                    });
                });
            }
        }

        function openProjectModal(projectId = null) {
            const modal = document.getElementById('project-modal');
            const title = document.getElementById('project-modal-title');
            const upgradesContainer = document.getElementById('upgrades-container');
            const imagesContainer = document.getElementById('images-container');
            
            upgradesContainer.innerHTML = '';
            imagesContainer.innerHTML = '';
            
            if (projectId) {
                title.textContent = 'Edit Project';
                const projects = JSON.parse(localStorage.getItem(STORAGE_KEYS.PROJECTS));
                const project = projects.find(p => p.id === projectId);
                
                if (project) {
                    document.getElementById('project-name').value = project.name;
                    document.getElementById('project-languages').value = project.languages.join(', ');
                    document.getElementById('project-description').value = project.description;
                    document.getElementById('project-progress').value = project.progress;
                    document.getElementById('progress-value').textContent = project.progress + '%';
                    
                    project.upgrades.forEach(upgrade => {
                        addUpgradeField(upgrade.description, upgrade.priority);
                    });
                    
                    project.images.forEach(image => {
                        addImagePreview(image.data, image.title);
                    });
                    
                    modal.dataset.editingProjectId = projectId;
                }
            } else {
                title.textContent = 'Add New Project';
                document.getElementById('project-name').value = '';
                document.getElementById('project-languages').value = '';
                document.getElementById('project-description').value = '';
                document.getElementById('project-progress').value = 0;
                document.getElementById('progress-value').textContent = '0%';
                delete modal.dataset.editingProjectId;
            }
            
            openModal('project-modal');
        }

        function addUpgradeField(description = '', priority = 'medium') {
            const upgradesContainer = document.getElementById('upgrades-container');
            
            const upgradeField = document.createElement('div');
            upgradeField.className = 'form-group';
            upgradeField.style.display = 'flex';
            upgradeField.style.gap = '10px';
            upgradeField.style.alignItems = 'center';
            
            upgradeField.innerHTML = `
                <select class="upgrade-priority-select" style="flex: 1;">
                    <option value="high" ${priority === 'high' ? 'selected' : ''}>High</option>
                    <option value="medium" ${priority === 'medium' ? 'selected' : ''}>Medium</option>
                    <option value="low" ${priority === 'low' ? 'selected' : ''}>Low</option>
                </select>
                <input type="text" class="upgrade-description" placeholder="Upgrade description" value="${description}" style="flex: 3;">
                <button type="button" class="btn btn-secondary delete-upgrade" style="padding: 5px 10px;">×</button>
            `;
            
            upgradesContainer.appendChild(upgradeField);
            
            upgradeField.querySelector('.delete-upgrade').addEventListener('click', function() {
                upgradesContainer.removeChild(upgradeField);
            });
        }

        function addImagePreview(imageData, title = '') {
            const imagesContainer = document.getElementById('images-container');
            
            if (imagesContainer.children.length >= 3) {
                alert('Maximum 3 images allowed per project');
                return;
            }
            
            const imagePreview = document.createElement('div');
            imagePreview.style.position = 'relative';
            imagePreview.style.display = 'inline-block';
            imagePreview.style.margin = '5px';
            
            imagePreview.innerHTML = `
                <img src="${imageData}" style="width: 100px; height: 80px; object-fit: cover; border-radius: 8px;">
                <input type="text" class="image-title" placeholder="Image title" value="${title}" style="width: 100px; font-size: 0.8rem; margin-top: 5px;">
                <button type="button" class="btn btn-secondary delete-image" style="position: absolute; top: -5px; right: -5px; padding: 2px 6px; font-size: 0.8rem;">×</button>
            `;
            
            imagesContainer.appendChild(imagePreview);
            
            imagePreview.querySelector('.delete-image').addEventListener('click', function() {
                imagesContainer.removeChild(imagePreview);
            });
        }

        function saveProject() {
            const name = document.getElementById('project-name').value;
            const languages = document.getElementById('project-languages').value.split(',').map(lang => lang.trim()).filter(lang => lang);
            const description = document.getElementById('project-description').value;
            const progress = parseInt(document.getElementById('project-progress').value);
            
            if (!name) {
                alert('Please enter a project name');
                return;
            }
            
            const upgrades = [];
            document.querySelectorAll('#upgrades-container .form-group').forEach(upgradeField => {
                const priority = upgradeField.querySelector('.upgrade-priority-select').value;
                const description = upgradeField.querySelector('.upgrade-description').value;
                if (description) {
                    upgrades.push({ priority, description });
                }
            });
            
            const images = [];
            document.querySelectorAll('#images-container > div').forEach(imageDiv => {
                const data = imageDiv.querySelector('img').src;
                const title = imageDiv.querySelector('.image-title').value;
                images.push({ data, title });
            });
            
            const projects = JSON.parse(localStorage.getItem(STORAGE_KEYS.PROJECTS));
            const modal = document.getElementById('project-modal');
            
            if (modal.dataset.editingProjectId) {
                const projectIndex = projects.findIndex(p => p.id === modal.dataset.editingProjectId);
                if (projectIndex !== -1) {
                    projects[projectIndex] = {
                        ...projects[projectIndex],
                        name,
                        languages,
                        description,
                        progress,
                        upgrades,
                        images
                    };
                }
            } else {
                const newProject = {
                    id: Date.now().toString(),
                    name,
                    languages,
                    description,
                    progress,
                    upgrades,
                    images,
                    created: new Date().toISOString()
                };
                projects.push(newProject);
            }
            
            localStorage.setItem(STORAGE_KEYS.PROJECTS, JSON.stringify(projects));
            closeModal('project-modal');
            initializeProjects();
            alert('Project saved successfully!');
        }

        // NEW CINEMA FUNCTIONS
        let currentCinemaTab = 'watched';
        let currentGenre = '';

        function initializeCinema() {
            const cinemaData = JSON.parse(localStorage.getItem(STORAGE_KEYS.CINEMA));
            
            // Set active cinema tab
            document.querySelectorAll('.cinema-tab').forEach(tab => {
                tab.classList.remove('active');
                if (tab.dataset.cinemaTab === currentCinemaTab) {
                    tab.classList.add('active');
                }
            });
            
            // Show active section
            document.querySelectorAll('.cinema-section').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById(`${currentCinemaTab}-section`).classList.add('active');
            
            if (currentCinemaTab === 'watched') {
                initializeWatched();
            } else if (currentCinemaTab === 'wishlist') {
                initializeWishlist();
            }
            // Fav Ones section just shows the genre tabs
        }

        function initializeWatched() {
            const cinemaData = JSON.parse(localStorage.getItem(STORAGE_KEYS.CINEMA));
            const watchedList = document.getElementById('watched-list');
            const watchedMovies = cinemaData.watched;
            
            // Update stats
            document.getElementById('watched-count').textContent = watchedMovies.length;
            
            let totalDuration = 0;
            let genreCount = {};
            
            watchedMovies.forEach(movie => {
                totalDuration += movie.duration;
                genreCount[movie.genre] = (genreCount[movie.genre] || 0) + 1;
            });
            
            document.getElementById('total-duration').textContent = `${Math.round(totalDuration / 60)}h`;
            
            let topGenre = '';
            let maxCount = 0;
            Object.entries(genreCount).forEach(([genre, count]) => {
                if (count > maxCount) {
                    maxCount = count;
                    topGenre = genre;
                }
            });
            
            document.getElementById('top-genre').textContent = formatGenreName(topGenre) || '-';
            
            // Render movies
            renderMovieList(watchedMovies, watchedList, 'watched');
        }

        function initializeWishlist() {
            const cinemaData = JSON.parse(localStorage.getItem(STORAGE_KEYS.CINEMA));
            const wishlistList = document.getElementById('wishlist-list');
            const wishlistMovies = cinemaData.wishlist;
            
            // Update stats
            document.getElementById('wishlist-count').textContent = wishlistMovies.length;
            
            // Render movies
            renderMovieList(wishlistMovies, wishlistList, 'wishlist');
        }

        function initializeGenre(genre) {
            currentGenre = genre;
            const cinemaData = JSON.parse(localStorage.getItem(STORAGE_KEYS.CINEMA));
            const genreList = document.getElementById('genre-list');
            const genreMovies = cinemaData.favones[genre];
            
            // Update title
            document.getElementById('genre-title').textContent = `${formatGenreName(genre)} Movies`;
            
            // Update stats
            document.getElementById('genre-count').textContent = genreMovies.length;
            
            let totalDuration = 0;
            genreMovies.forEach(movie => {
                totalDuration += movie.duration;
            });
            
            document.getElementById('genre-duration').textContent = `${Math.round(totalDuration / 60)}h`;
            
            // Render movies
            renderMovieList(genreMovies, genreList, 'genre');
        }

        function renderMovieList(movies, container, type) {
            container.innerHTML = '';
            
            if (movies.length === 0) {
                container.innerHTML = '<p>No movies added yet.</p>';
            } else {
                movies.forEach(movie => {
                    const movieElement = document.createElement('div');
                    movieElement.className = 'item';
                    
                    movieElement.innerHTML = `
                        <div class="item-info">
                            <strong>${movie.name}</strong>
                            <div>
                                <span style="background: ${getGenreColor(movie.genre)}; color: white; padding: 2px 8px; border-radius: 12px; font-size: 0.8rem; margin-right: 8px;">
                                    ${formatGenreName(movie.genre)}
                                </span>
                                Duration: ${movie.duration} min | Main Actor: ${movie.actor}
                            </div>
                        </div>
                        <div class="item-actions">
                            <button class="action-btn delete-btn" data-id="${movie.id}" data-type="${type}">🗑️</button>
                        </div>
                    `;
                    
                    container.appendChild(movieElement);
                    
                    movieElement.querySelector('.delete-btn').addEventListener('click', function() {
                        deleteMovie(this.dataset.id, this.dataset.type);
                    });
                });
            }
        }

        function formatGenreName(genre) {
            const names = {
                romcom: 'RomCom',
                action: 'Action',
                comedy: 'Comedy',
                mindbending: 'Mindbending',
                peace: 'Peace',
                drama: 'Drama',
                thriller: 'Thriller',
                horror: 'Horror',
                'sci-fi': 'Sci-Fi',
                fantasy: 'Fantasy'
            };
            return names[genre] || genre;
        }

        function getGenreColor(genre) {
            const colors = {
                romcom: '#ff69b4',
                action: '#ff6b6b',
                comedy: '#4a90e2',
                mindbending: '#2d3436',
                peace: '#95a5a6',
                drama: '#9b59b6',
                thriller: '#e74c3c',
                horror: '#8e44ad',
                'sci-fi': '#3498db',
                fantasy: '#f39c12'
            };
            return colors[genre] || '#95a5a6';
        }

        function saveWatchedMovie() {
            const name = document.getElementById('watched-name').value;
            const genre = document.getElementById('watched-genre').value;
            const duration = parseInt(document.getElementById('watched-duration').value);
            const actor = document.getElementById('watched-actor').value;
            
            if (!name || !genre || isNaN(duration) || !actor) {
                alert('Please fill all fields with valid data');
                return;
            }
            
            const cinemaData = JSON.parse(localStorage.getItem(STORAGE_KEYS.CINEMA));
            const newMovie = {
                id: Date.now().toString(),
                name,
                genre,
                duration,
                actor
            };
            
            cinemaData.watched.push(newMovie);
            localStorage.setItem(STORAGE_KEYS.CINEMA, JSON.stringify(cinemaData));
            
            closeModal('watched-modal');
            initializeWatched();
            alert('Movie added to watched list!');
        }

        function saveWishlistMovie() {
            const name = document.getElementById('wishlist-name').value;
            const genre = document.getElementById('wishlist-genre').value;
            const duration = parseInt(document.getElementById('wishlist-duration').value);
            const actor = document.getElementById('wishlist-actor').value;
            
            if (!name || !genre || isNaN(duration) || !actor) {
                alert('Please fill all fields with valid data');
                return;
            }
            
            const cinemaData = JSON.parse(localStorage.getItem(STORAGE_KEYS.CINEMA));
            const newMovie = {
                id: Date.now().toString(),
                name,
                genre,
                duration,
                actor
            };
            
            cinemaData.wishlist.push(newMovie);
            localStorage.setItem(STORAGE_KEYS.CINEMA, JSON.stringify(cinemaData));
            
            closeModal('wishlist-modal');
            initializeWishlist();
            alert('Movie added to wishlist!');
        }

        function saveGenreMovie() {
            const name = document.getElementById('genre-movie-name').value;
            const duration = parseInt(document.getElementById('genre-movie-duration').value);
            const actor = document.getElementById('genre-movie-actor').value;
            
            if (!name || isNaN(duration) || !actor) {
                alert('Please fill all fields with valid data');
                return;
            }
            
            const cinemaData = JSON.parse(localStorage.getItem(STORAGE_KEYS.CINEMA));
            const newMovie = {
                id: Date.now().toString(),
                name,
                genre: currentGenre,
                duration,
                actor
            };
            
            cinemaData.favones[currentGenre].push(newMovie);
            localStorage.setItem(STORAGE_KEYS.CINEMA, JSON.stringify(cinemaData));
            
            closeModal('genre-modal');
            initializeGenre(currentGenre);
            alert('Movie added to favorites!');
        }

        function deleteMovie(movieId, type) {
            const cinemaData = JSON.parse(localStorage.getItem(STORAGE_KEYS.CINEMA));
            
            if (type === 'watched') {
                cinemaData.watched = cinemaData.watched.filter(movie => movie.id !== movieId);
            } else if (type === 'wishlist') {
                cinemaData.wishlist = cinemaData.wishlist.filter(movie => movie.id !== movieId);
            } else if (type === 'genre') {
                cinemaData.favones[currentGenre] = cinemaData.favones[currentGenre].filter(movie => movie.id !== movieId);
            }
            
            localStorage.setItem(STORAGE_KEYS.CINEMA, JSON.stringify(cinemaData));
            
            if (type === 'watched') {
                initializeWatched();
            } else if (type === 'wishlist') {
                initializeWishlist();
            } else if (type === 'genre') {
                initializeGenre(currentGenre);
            }
        }

        // Search functionality
        function setupSearch() {
            // Watched search
            document.getElementById('watched-search').addEventListener('input', function() {
                const searchTerm = this.value.toLowerCase();
                const cinemaData = JSON.parse(localStorage.getItem(STORAGE_KEYS.CINEMA));
                const filteredMovies = cinemaData.watched.filter(movie => 
                    movie.name.toLowerCase().includes(searchTerm) ||
                    movie.actor.toLowerCase().includes(searchTerm) ||
                    movie.genre.toLowerCase().includes(searchTerm)
                );
                renderMovieList(filteredMovies, document.getElementById('watched-list'), 'watched');
            });
            
            // Wishlist search
            document.getElementById('wishlist-search').addEventListener('input', function() {
                const searchTerm = this.value.toLowerCase();
                const cinemaData = JSON.parse(localStorage.getItem(STORAGE_KEYS.CINEMA));
                const filteredMovies = cinemaData.wishlist.filter(movie => 
                    movie.name.toLowerCase().includes(searchTerm) ||
                    movie.actor.toLowerCase().includes(searchTerm) ||
                    movie.genre.toLowerCase().includes(searchTerm)
                );
                renderMovieList(filteredMovies, document.getElementById('wishlist-list'), 'wishlist');
            });
            
            // Genre search
            document.getElementById('genre-search').addEventListener('input', function() {
                const searchTerm = this.value.toLowerCase();
                const cinemaData = JSON.parse(localStorage.getItem(STORAGE_KEYS.CINEMA));
                const filteredMovies = cinemaData.favones[currentGenre].filter(movie => 
                    movie.name.toLowerCase().includes(searchTerm) ||
                    movie.actor.toLowerCase().includes(searchTerm)
                );
                renderMovieList(filteredMovies, document.getElementById('genre-list'), 'genre');
            });
        }

        // Data Management
        function exportData() {
            const data = {};
            Object.keys(STORAGE_KEYS).forEach(key => {
                data[key] = localStorage.getItem(STORAGE_KEYS[key]);
            });
            
            const dataStr = JSON.stringify(data, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            
            const url = URL.createObjectURL(dataBlob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'omnitrack-data.json';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            alert('Data exported successfully!');
        }

        function importData() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            
            input.onchange = e => {
                const file = e.target.files[0];
                const reader = new FileReader();
                
                reader.onload = event => {
                    try {
                        const data = JSON.parse(event.target.result);
                        
                        Object.keys(data).forEach(key => {
                            if (STORAGE_KEYS[key]) {
                                localStorage.setItem(STORAGE_KEYS[key], data[key]);
                            }
                        });
                        
                        alert('Data imported successfully!');
                        location.reload();
                    } catch (error) {
                        alert('Error importing data: Invalid file format.');
                    }
                };
                
                reader.readAsText(file);
            };
            
            input.click();
        }

        function resetData() {
            if (confirm('Are you sure you want to reset all data? This action cannot be undone.')) {
                Object.values(STORAGE_KEYS).forEach(key => {
                    localStorage.removeItem(key);
                });
                
                initializeData();
                alert('All data has been reset.');
                location.reload();
            }
        }

        // Event Listeners
        document.addEventListener('DOMContentLoaded', () => {
            initializeData();
            createPetals();
            
            const savedTheme = localStorage.getItem(STORAGE_KEYS.THEME) || 'sky-blue';
            applyTheme(savedTheme);
            
            // Navigation
            document.getElementById('start-btn').addEventListener('click', () => {
                showPage('dashboard-page');
            });
            
            document.getElementById('back-to-welcome').addEventListener('click', () => {
                showPage('welcome-page');
            });
            
            document.getElementById('settings-btn').addEventListener('click', () => {
                openModal('settings-modal');
            });
            
            document.getElementById('close-settings').addEventListener('click', () => {
                closeModal('settings-modal');
            });
            
            document.querySelectorAll('.theme-option').forEach(option => {
                option.addEventListener('click', () => {
                    applyTheme(option.dataset.theme);
                });
            });
            
            document.querySelectorAll('.widget').forEach(widget => {
                if (widget.dataset.module) {
                    widget.addEventListener('click', () => {
                        showPage(`${widget.dataset.module}-page`);
                        initializeModule(widget.dataset.module);
                    });
                }
            });
            
            document.querySelectorAll('[id^="back-from-"]').forEach(btn => {
                btn.addEventListener('click', () => {
                    if (btn.id === 'back-from-genre') {
                        showPage('cinema-page');
                    } else {
                        showPage('dashboard-page');
                    }
                });
            });
            
            // Calendar
            document.getElementById('prev-month').addEventListener('click', () => {
                currentMonth--;
                if (currentMonth < 0) {
                    currentMonth = 11;
                    currentYear--;
                }
                generateCalendar(currentMonth, currentYear);
            });
            
            document.getElementById('next-month').addEventListener('click', () => {
                currentMonth++;
                if (currentMonth > 11) {
                    currentMonth = 0;
                    currentYear++;
                }
                generateCalendar(currentMonth, currentYear);
            });
            
            document.getElementById('add-event-btn').addEventListener('click', () => {
                openEventModal(new Date());
            });
            
            document.getElementById('save-event-btn').addEventListener('click', saveEvent);
            
            // Screen Time
            document.getElementById('add-screen-time-btn').addEventListener('click', () => {
                openModal('screen-time-modal');
            });
            
            document.getElementById('save-screen-time-btn').addEventListener('click', saveScreenTime);
            
            // Fitness
            document.getElementById('update-fitness-btn').addEventListener('click', updateFitness);
            
            // FIXED: Education Event Listeners
            document.querySelectorAll('.subject-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    document.querySelectorAll('.subject-tab').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    const educationData = JSON.parse(localStorage.getItem(STORAGE_KEYS.EDUCATION));
                    educationData.currentSubject = this.dataset.subject;
                    localStorage.setItem(STORAGE_KEYS.EDUCATION, JSON.stringify(educationData));
                    
                    currentSubject = this.dataset.subject;
                    initializeEducation();
                });
            });
            
            // FIXED: Add Table Chapter Button
            document.getElementById('add-table-chapter').addEventListener('click', addTableChapter);
            document.getElementById('save-table-chapter-btn').addEventListener('click', saveTableChapter);
            document.getElementById('close-table-chapter').addEventListener('click', () => {
                closeModal('table-chapter-modal');
            });
            
            // FIXED: Add Strength Chapter Button
            document.getElementById('add-strength-chapter').addEventListener('click', addStrengthChapter);
            document.getElementById('save-strength-chapter-btn').addEventListener('click', saveStrengthChapter);
            document.getElementById('close-strength-chapter').addEventListener('click', () => {
                closeModal('strength-chapter-modal');
            });
            
            // To-Do
            document.getElementById('add-todo-btn').addEventListener('click', () => {
                openModal('todo-modal');
            });
            
            document.getElementById('save-todo-btn').addEventListener('click', saveTodo);
            
            // Countdown
            document.getElementById('add-countdown-btn').addEventListener('click', () => {
                openModal('countdown-modal');
            });
            
            document.getElementById('save-countdown-btn').addEventListener('click', saveCountdown);
            
            // Clothing
            document.getElementById('save-clothing-btn').addEventListener('click', saveClothingItem);
            
            // Projects
            document.getElementById('add-project-btn').addEventListener('click', () => {
                openProjectModal();
            });
            
            document.getElementById('save-project-btn').addEventListener('click', saveProject);
            
            document.getElementById('add-upgrade-btn').addEventListener('click', () => {
                addUpgradeField();
            });
            
            document.getElementById('project-progress').addEventListener('input', function() {
                document.getElementById('progress-value').textContent = this.value + '%';
            });
            
            document.getElementById('image-upload-area').addEventListener('click', function() {
                document.getElementById('image-upload').click();
            });
            
            document.getElementById('image-upload').addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(event) {
                        addImagePreview(event.target.result, file.name);
                    };
                    reader.readAsDataURL(file);
                }
                e.target.value = '';
            });
            
            document.getElementById('close-project').addEventListener('click', () => {
                closeModal('project-modal');
            });
            
            // NEW CINEMA EVENT LISTENERS
            // Cinema tabs
            document.querySelectorAll('.cinema-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    document.querySelectorAll('.cinema-tab').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    currentCinemaTab = this.dataset.cinemaTab;
                    initializeCinema();
                });
            });
            
            // Fav Ones genre tabs
            document.querySelectorAll('.fav-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const genre = this.dataset.genre;
                    showPage('genre-page');
                    initializeGenre(genre);
                });
            });
            
            // Add movie buttons
            document.getElementById('add-watched-btn').addEventListener('click', () => {
                openModal('watched-modal');
            });
            
            document.getElementById('add-wishlist-btn').addEventListener('click', () => {
                openModal('wishlist-modal');
            });
            
            document.getElementById('add-genre-btn').addEventListener('click', () => {
                openModal('genre-modal');
            });
            
            // Save movie buttons
            document.getElementById('save-watched-btn').addEventListener('click', saveWatchedMovie);
            document.getElementById('save-wishlist-btn').addEventListener('click', saveWishlistMovie);
            document.getElementById('save-genre-movie-btn').addEventListener('click', saveGenreMovie);
            
            // Close cinema modals
            document.getElementById('close-watched').addEventListener('click', () => {
                closeModal('watched-modal');
            });
            
            document.getElementById('close-wishlist').addEventListener('click', () => {
                closeModal('wishlist-modal');
            });
            
            document.getElementById('close-genre').addEventListener('click', () => {
                closeModal('genre-modal');
            });
            
            // Setup search functionality
            setupSearch();
            
            // Close modals
            document.getElementById('close-event').addEventListener('click', () => {
                closeModal('event-modal');
            });
            
            document.getElementById('close-screen-time').addEventListener('click', () => {
                closeModal('screen-time-modal');
            });
            
            document.getElementById('close-todo').addEventListener('click', () => {
                closeModal('todo-modal');
            });
            
            document.getElementById('close-countdown').addEventListener('click', () => {
                closeModal('countdown-modal');
            });
            
            document.getElementById('close-clothing').addEventListener('click', () => {
                closeModal('clothing-modal');
            });
            
            // Data management
            document.getElementById('export-data').addEventListener('click', exportData);
            document.getElementById('import-data').addEventListener('click', importData);
            document.getElementById('reset-data').addEventListener('click', resetData);
            
            window.addEventListener('click', (e) => {
                if (e.target.classList.contains('modal')) {
                    e.target.style.display = 'none';
                }
            });
            
            updateClock();
            setInterval(updateClock, 1000);
            
            setInterval(() => {
                if (document.getElementById('countdown-page').classList.contains('active')) {
                    initializeCountdown();
                }
            }, 1000);
        });

        // Initialize modules
        function initializeModule(moduleName) {
            switch(moduleName) {
                case 'clock':
                    updateClock();
                    break;
                case 'calendar':
                    initializeCalendar();
                    break;
                case 'screen-time':
                    initializeScreenTime();
                    break;
                case 'fitness':
                    initializeFitness();
                    break;
                case 'education':
                    initializeEducation();
                    break;
                case 'todo':
                    initializeTodo();
                    break;
                case 'countdown':
                    initializeCountdown();
                    break;
                case 'clothing':
                    initializeClothing();
                    break;
                case 'projects':
                    initializeProjects();
                    break;
                case 'cinema': // NEW
                    initializeCinema();
                    break;
            }
        }
    </script>
</body>
</html>
